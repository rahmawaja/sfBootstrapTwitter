<?xml version="1.0" encoding="utf-8" standalone="no" ?>
<orm-designer version="1.4.6.488">

  <module import-format="PropelYml" import-path="schema.yml" name="www" visBkColor="15989236" visSizeX="0" visSizeX2="1161" visSizeY="33" visSizeY2="910">
    <table name="agency" visPositionX="200" visPositionY="737" visSizeX="0" visSizeX2="119" visSizeY="0" visSizeY2="73">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="label" size="100" type="varchar"/>
      <column name="address" type="longvarchar"/>
      <orm-properties>
        <attribute name="phpName">agency</attribute>
      </orm-properties>
    </table>
    <table name="bill" visPositionX="20" visPositionY="356" visSizeX="0" visSizeX2="116" visSizeY="0" visSizeY2="255">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="billing_date" type="date"/>
      <column name="billing_address" type="date"/>
      <column name="site_id" required="true" type="integer"/>
      <column name="nature" type="integer"/>
      <column name="provenance" type="integer"/>
      <column name="object" size="255" type="varchar"/>
      <column name="price_no_tax" type="float"/>
      <column name="price_tax" type="float"/>
      <column name="tax" type="float"/>
      <column name="operator_id" required="true" type="integer"/>
      <column name="agency_id" required="true" type="integer"/>
      <column name="status" type="integer"/>
      <column name="date_export" type="date"/>
      <column name="deposit" type="float"/>
      <column name="info" type="longvarchar"/>
      <orm-properties>
        <attribute name="phpName">bill</attribute>
      </orm-properties>
    </table>
    <table name="bill_item" visPositionX="31" visPositionY="659" visSizeX="0" visSizeX2="95" visSizeY="0" visSizeY2="59">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="bill_id" required="true" type="integer"/>
      <column name="item_id" required="true" type="integer"/>
      <orm-properties>
        <attribute name="phpName">billItem</attribute>
      </orm-properties>
    </table>
    <table name="client" visPositionX="21" visPositionY="27" visSizeX="0" visSizeX2="166" visSizeY="0" visSizeY2="255">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="user_id" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="label" size="100" type="varchar"/>
      <column name="code_ape" size="100" type="varchar"/>
      <column name="account" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="address" type="longvarchar"/>
      <column name="billing_address" type="longvarchar"/>
      <column name="contact" size="100" type="varchar"/>
      <column name="phone" size="100" type="varchar"/>
      <column name="billing_phone" size="100" type="varchar"/>
      <column name="tax" type="float"/>
      <column name="sales_account" size="100" type="varchar"/>
      <column name="purchase_account" size="100" type="varchar"/>
      <column name="means_payment" size="100" type="varchar"/>
      <column name="due_date_payment" type="integer"/>
      <column name="intrastat" size="100" type="varchar"/>
      <orm-properties>
        <attribute name="phpName">client</attribute>
      </orm-properties>
    </table>
    <table name="contract" visPositionX="655" visPositionY="306" visSizeX="0" visSizeX2="117" visSizeY="0" visSizeY2="157">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="client_id" required="true" type="integer"/>
      <column name="date_begin" type="date"/>
      <column name="date_end" type="date"/>
      <column name="date_sign" type="date"/>
      <column name="date_terminate" type="date"/>
      <column name="date_next_bill" type="date"/>
      <column name="total" type="integer"/>
      <column default="1" name="is_current" type="boolean"/>
      <orm-properties>
        <attribute name="phpName">contract</attribute>
      </orm-properties>
    </table>
    <table name="contract_installation" visPositionX="878" visPositionY="311" visSizeX="0" visSizeX2="121" visSizeY="0" visSizeY2="59">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="contract_id" required="true" type="integer"/>
      <column name="installation_id" required="true" type="integer"/>
      <orm-properties>
        <attribute name="phpName">contractInstallation</attribute>
      </orm-properties>
    </table>
    <table name="devis" visPositionX="316" visPositionY="423" visSizeX="0" visSizeX2="126" visSizeY="0" visSizeY2="115">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="site_id" required="true" type="integer"/>
      <column name="operator_id" required="true" type="integer"/>
      <column name="intervention_id" required="true" type="integer"/>
      <column name="amount" type="float"/>
      <column name="object" size="255" type="varchar"/>
      <orm-properties>
        <attribute name="phpName">devis</attribute>
      </orm-properties>
    </table>
    <table name="equipment" visPositionX="572" visPositionY="615" visSizeX="0" visSizeX2="115" visSizeY="0" visSizeY2="73">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="brand" size="100" type="varchar"/>
      <column name="model" size="100" type="varchar"/>
      <orm-properties>
        <attribute name="phpName">equipment</attribute>
      </orm-properties>
    </table>
    <table name="installation" visPositionX="1033" visPositionY="277" visSizeX="0" visSizeX2="110" visSizeY="0" visSizeY2="59">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="label" size="100" type="varchar"/>
      <orm-properties>
        <attribute name="phpName">installation</attribute>
      </orm-properties>
    </table>
    <table name="installation_equipment" visPositionX="569" visPositionY="507" visSizeX="0" visSizeX2="120" visSizeY="0" visSizeY2="73">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="contract_id" required="true" type="integer"/>
      <column name="equipment_id" required="true" type="integer"/>
      <column name="quantity" type="integer"/>
      <orm-properties>
        <attribute name="phpName">installationEquipment</attribute>
      </orm-properties>
    </table>
    <table name="intervention" visPositionX="759" visPositionY="92" visSizeX="0" visSizeX2="131" visSizeY="0" visSizeY2="199">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="site_id" required="true" type="integer"/>
      <column name="technician_id" required="true" type="integer"/>
      <column name="importance" type="integer"/>
      <column name="nature" type="integer"/>
      <column name="provenance" type="integer"/>
      <column default="1" name="is_current" type="boolean"/>
      <column name="date_passage" type="date"/>
      <column name="date_planned" type="date"/>
      <column name="symptome" type="longvarchar"/>
      <column name="info" type="longvarchar"/>
      <column name="created_at" type="timestamp"/>
      <orm-properties>
        <attribute name="phpName">intervention</attribute>
      </orm-properties>
    </table>
    <table name="intervention_installation" visPositionX="940" visPositionY="186" visSizeX="0" visSizeX2="126" visSizeY="0" visSizeY2="59">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="intervention_id" required="true" type="integer"/>
      <column name="installation_id" required="true" type="integer"/>
      <orm-properties>
        <attribute name="phpName">interventionInstallation</attribute>
      </orm-properties>
    </table>
    <table name="item" visPositionX="23" visPositionY="771" visSizeX="0" visSizeX2="110" visSizeY="0" visSizeY2="73">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="label" size="100" type="varchar"/>
      <column name="price_no_tax" type="float"/>
      <orm-properties>
        <attribute name="phpName">item</attribute>
      </orm-properties>
    </table>
    <table name="operator" visPositionX="157" visPositionY="317" visSizeX="0" visSizeX2="108" visSizeY="0" visSizeY2="59">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="user_id" required="true" type="integer"/>
      <column name="agency_id" required="true" type="integer"/>
      <orm-properties>
        <attribute name="phpName">operator</attribute>
      </orm-properties>
    </table>
    <table name="report" visPositionX="955" visPositionY="504" visSizeX="0" visSizeX2="126" visSizeY="0" visSizeY2="115">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="intervention_id" required="true" type="integer"/>
      <column name="num_bt" size="100" type="varchar"/>
      <column name="date_begin" type="date"/>
      <column name="date_end" type="date"/>
      <column name="object" size="100" type="varchar"/>
      <column name="file" size="255" type="varchar"/>
      <orm-properties>
        <attribute name="phpName">report</attribute>
      </orm-properties>
    </table>
    <table name="round" visPositionX="491" visPositionY="300" visSizeX="0" visSizeX2="119" visSizeY="0" visSizeY2="87">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="label" size="100" type="varchar"/>
      <column name="agency_id" required="true" type="integer"/>
      <column name="technician_id" type="integer"/>
      <orm-properties>
        <attribute name="phpName">round</attribute>
      </orm-properties>
    </table>
    <table name="round_site" visPositionX="215" visPositionY="236" visSizeX="0" visSizeX2="100" visSizeY="0" visSizeY2="59">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="round_id" required="true" type="integer"/>
      <column name="site_id" required="true" type="integer"/>
      <orm-properties>
        <attribute name="phpName">roundSite</attribute>
      </orm-properties>
    </table>
    <table name="sf_guard_user_profile" visPositionX="955" visPositionY="747" visSizeX="0" visSizeX2="130" visSizeY="0" visSizeY2="101">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="user_id" required="true" type="integer"/>
      <column name="genre" type="integer"/>
      <column name="first_name" size="45" type="varchar"/>
      <column name="last_name" size="45" type="varchar"/>
      <column name="email" size="100" type="varchar"/>
      <orm-properties>
        <attribute name="phpName">sfGuardUserProfile</attribute>
      </orm-properties>
    </table>
    <table name="site" visPositionX="288" visPositionY="10" visSizeX="0" visSizeX2="119" visSizeY="0" visSizeY2="157">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="user_id" required="true" type="integer"/>
      <column name="code" size="100" type="varchar">
        <orm-properties>
          <attribute name="index">unique</attribute>
        </orm-properties>
      </column>
      <column name="label" size="100" type="varchar"/>
      <column name="address" type="longvarchar"/>
      <column name="phone" size="100" type="varchar"/>
      <column name="round_id" type="integer"/>
      <column name="technician_id" type="integer"/>
      <column name="client_id" required="true" type="integer"/>
      <column name="info" type="longvarchar"/>
      <orm-properties>
        <attribute name="phpName">site</attribute>
      </orm-properties>
    </table>
    <table name="site_contact" visPositionX="460" visPositionY="-24" visSizeX="0" visSizeX2="124" visSizeY="0" visSizeY2="87">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="site_id" required="true" type="integer"/>
      <column name="name" size="100" type="varchar"/>
      <column name="fonction" size="100" type="varchar"/>
      <column name="phone" size="100" type="varchar"/>
      <orm-properties>
        <attribute name="phpName">siteContact</attribute>
      </orm-properties>
    </table>
    <table name="site_installation" visPositionX="952" visPositionY="21" visSizeX="0" visSizeX2="121" visSizeY="0" visSizeY2="59">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="site_id" required="true" type="integer"/>
      <column name="installation_id" required="true" type="integer"/>
      <orm-properties>
        <attribute name="phpName">siteInstallation</attribute>
      </orm-properties>
    </table>
    <table name="technician" visPositionX="523" visPositionY="136" visSizeX="0" visSizeX2="95" visSizeY="0" visSizeY2="45">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="user_id" required="true" type="integer"/>
      <orm-properties>
        <attribute name="phpName">technician</attribute>
      </orm-properties>
    </table>
    <table name="timeline" visPositionX="779" visPositionY="567" visSizeX="0" visSizeX2="126" visSizeY="0" visSizeY2="73">
      <column auto-increment="true" name="id" primary="true" required="true" type="integer"/>
      <column name="intervention_id" required="true" type="integer"/>
      <column name="report_id" type="integer"/>
      <column name="status" type="integer"/>
      <orm-properties>
        <attribute name="phpName">timeline</attribute>
      </orm-properties>
    </table>
    <orm-properties>
      <attribute name="package">lib.model</attribute>
      <attribute name="defaultIdMethod">native</attribute>
    </orm-properties>
    <foreign-key from="bill" name="FK_bill_site_id" to="site">
      <foreign-key-column from="site_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="bill" name="FK_bill_operator_id" to="operator">
      <foreign-key-column from="operator_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="bill" name="FK_bill_agency_id" to="agency" visCenterX="32" visCenterY="0">
      <foreign-key-column from="agency_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="bill_item" name="FK_bill_item_bill_id" to="bill">
      <foreign-key-column from="bill_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="bill_item" name="FK_bill_item_item_id" to="item">
      <foreign-key-column from="item_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="client" name="FK_client_sf_guard_user_id" to="sf_guard_user" visSplitted="1">
      <foreign-key-column from="user_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="contract" name="FK_contract_client_id" to="client">
      <foreign-key-column from="client_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="contract_installation" name="FK_contract_installation_contract_id" to="contract">
      <foreign-key-column from="contract_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="contract_installation" name="FK_contract_installation_installation_id" to="installation">
      <foreign-key-column from="installation_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="devis" name="FK_devis_site_id" to="site">
      <foreign-key-column from="site_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="devis" name="FK_devis_operator_id" to="operator" visCenterX="0" visCenterY="0">
      <foreign-key-column from="operator_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="devis" name="FK_devis_intervention_id" to="intervention">
      <foreign-key-column from="intervention_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="installation_equipment" name="FK_installation_equipment_contract_id" to="contract">
      <foreign-key-column from="contract_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="installation_equipment" name="FK_installation_equipment_equipment_id" to="equipment">
      <foreign-key-column from="equipment_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="intervention" name="FK_intervention_site_id" to="site" visCenterX="58" visCenterY="0">
      <foreign-key-column from="site_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="intervention" name="FK_intervention_technician_id" to="technician" visCenterX="38" visCenterY="0">
      <foreign-key-column from="technician_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="intervention_installation" name="FK_intervention_installation_intervention_id" to="intervention">
      <foreign-key-column from="intervention_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="intervention_installation" name="FK_intervention_installation_installation_id" to="installation">
      <foreign-key-column from="installation_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="operator" name="FK_operator_sf_guard_user_id" to="sf_guard_user" visSplitted="1">
      <foreign-key-column from="user_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="operator" name="FK_operator_agency_id" to="agency" visCenterX="0" visCenterY="-69">
      <foreign-key-column from="agency_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="report" name="FK_report_intervention_id" to="intervention">
      <foreign-key-column from="intervention_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="round" name="FK_round_agency_id" to="agency">
      <foreign-key-column from="agency_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="round" name="FK_round_technician_id" to="technician" visCenterX="0" visCenterY="-12">
      <foreign-key-column from="technician_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">setnull</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="round_site" name="FK_round_site_round_id" to="round">
      <foreign-key-column from="round_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="round_site" name="FK_round_site_site_id" to="site" visCenterX="0" visCenterY="6">
      <foreign-key-column from="site_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="sf_guard_user_profile" name="FK_sf_guard_user_profile_sf_guard_user_id" to="sf_guard_user" visSplitted="1">
      <foreign-key-column from="user_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="site" name="FK_site_sf_guard_user_id" to="sf_guard_user" visSplitted="1">
      <foreign-key-column from="user_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="site" name="FK_site_round_id" to="round" visCenterX="0" visCenterY="-5">
      <foreign-key-column from="round_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">setnull</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="site" name="FK_site_technician_id" to="technician">
      <foreign-key-column from="technician_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">setnull</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="site" name="FK_site_client_id" to="client" visCenterX="-3" visCenterY="0">
      <foreign-key-column from="client_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="site_contact" name="FK_site_contact_site_id" to="site">
      <foreign-key-column from="site_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="site_installation" name="FK_site_installation_site_id" to="site" visCenterX="200" visCenterY="0">
      <foreign-key-column from="site_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="site_installation" name="FK_site_installation_installation_id" to="installation" visCenterX="0" visCenterY="-39">
      <foreign-key-column from="installation_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="technician" name="FK_technician_sf_guard_user_id" to="sf_guard_user" visSplitted="1">
      <foreign-key-column from="user_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="timeline" name="FK_timeline_intervention_id" to="intervention">
      <foreign-key-column from="intervention_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">cascade</attribute>
      </orm-properties>
    </foreign-key>
    <foreign-key from="timeline" name="FK_timeline_report_id" to="report">
      <foreign-key-column from="report_id" to="id"/>
      <orm-properties>
        <attribute name="onDelete">setnull</attribute>
      </orm-properties>
    </foreign-key>
  </module>

</orm-designer>
